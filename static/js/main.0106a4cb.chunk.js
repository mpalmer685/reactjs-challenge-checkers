(this["webpackJsonpreactjs-challenge-checkers"]=this["webpackJsonpreactjs-challenge-checkers"]||[]).push([[0],{146:function(e,r,t){e.exports=function(){return new Worker(t.p+"4ba19dc2a72202716042.worker.js")}},149:function(e,r,t){"use strict";t.r(r);var n=t(1),o=t(2),i=t(0),a=t.n(i),c=t(56),u=t.n(c),l={boardBorderColor:"#F6F873",boardRedColor:"#fa4a47",boardBlackColor:"#0F0D13",pieceRed:"#E53434",pieceBlack:"#584a4a"},s=t(4),f=t(6),d=t(57),p=t(9),v=t(23),b=t(13),h=t(58),m=t.n(h);function y(e,r){return null!=e&&null!=r&&(null===e||void 0===e?void 0:e.row)===(null===r||void 0===r?void 0:r.row)&&(null===e||void 0===e?void 0:e.column)===(null===r||void 0===r?void 0:r.column)}function j(e){return"red"===e?"black":"red"}var g={black:1,red:-1},x={black:7,red:0},w=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();Object(v.a)(this,e),this.state=m()(r)}return Object(b.a)(e,null,[{key:"fromState",value:function(r){return new e(_(r))}}]),Object(b.a)(e,[{key:"getState",value:function(){var e=new Array(8).fill(null).map((function(){return new Array(8).fill(null)}));return this.state.forEach((function(r,t){if((t+1)%9!==0){var n=P(t),o=n.row,i=n.column;e[o][i]=r}})),e}},{key:"getPieces",value:function(){return this.state.map((function(e,r){return e?{position:P(r),piece:e}:null})).filter(Boolean)}},{key:"getPieceAtPosition",value:function(e){return this.state[C(e)]}},{key:"availableMovesFromPosition",value:function(e){var r=this,t=C(e),n=this.state[t];if(null===n)return[];var o=[],i=[4,5].map((function(e){return e*g[n.player]}));n.isKing&&i.push.apply(i,Object(p.a)(i.map((function(e){return-1*e}))));var a=function(e){return e>=0&&e<=34&&(e+1)%9>0},c=function(e){return!!r.state[e]&&e!==t};i.forEach((function(n){var i=t+n;a(i)&&!r.state[i]&&o.push({from:e,to:P(i)})}));var u=function e(t,u,l){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],f=u+t,d=f+t,p=r.state[f];p&&p.player!==n.player&&a(d)&&!c(d)&&!l.includes(f)&&(l.push(f),o.push({jumps:s,from:P(u),to:P(d),captures:P(f)}),i.filter((function(e){return e!==-1*t})).forEach((function(r){e(r,d,l,s.concat([P(u)]))})))};return i.forEach((function(e){u(e,t,[])})),o.some((function(e){return e.captures}))?o.filter((function(e){return e.captures})):o}},{key:"availableMovesForPlayer",value:function(e){var r=this,t=this.getPieces().filter((function(r){return r.piece.player===e})).flatMap((function(e){var t=e.position;return r.availableMovesFromPosition(t)}));return t.some((function(e){return e.captures}))?t.filter((function(e){return e.captures})):t}},{key:"makeMove",value:function(e,r){var t=this,n=function(e){var r=C(e.from),n=C(e.to),o=t.state[r];o&&(e.to.row===x[o.player]&&(o.isKing=!0),t.state[n]=o,t.state[r]=null,e.captures&&(t.state[C(e.captures)]=null))},o=function(e){return function(r){var t,n,o;return y(e.from,r.from)&&y(e.to,r.to)&&(null===(t=e.jumps)||void 0===t?void 0:t.length)===(null===(n=r.jumps)||void 0===n?void 0:n.length)&&(null===(o=e.jumps)||void 0===o?void 0:o.every((function(e,t){return y(e,r.jumps[t])})))}};if(e.jumps&&e.jumps.length>0){for(var i=[],a=e.jumps.concat([e.from]),c=0;c<a.length-1;++c){var u=a[c],l=a[c+1],s=r.find(o({from:u,to:l,jumps:a.slice(0,c)}));i.push(s)}i.push(e),i.forEach(n)}else n(e);return this.getPieces()}},{key:"toString",value:function(){var e=function(e){if(null===e)return" ";var r=e.player.substr(0,1);return e.isKing?r.toUpperCase():r.toLowerCase()};return this.getState().map((function(r){return r.map(e).join(" ")})).join("\n")}}]),e}();function k(){return _(["  b   b   b   b","b   b   b   b  ","  b   b   b   b","               ","               ","r   r   r   r  ","  r   r   r   r","r   r   r   r  "])}var O=[4,0,5,1,6,2,7,3];function C(e){var r=e.row,t=e.column;return O[t]+9*Math.floor(r/2)}function P(e){return{row:Math.floor((e+1)/4.5),column:O.indexOf(e%9)}}function _(e){return(e=Array.isArray(e)?e.join("   "):e.replace(/\n/g,"   ")).split("").filter((function(e,r){return r%4===2})).map((function(e){return" "===e?null:{player:"r"===e.toLowerCase()?"red":"black",isKing:e.toUpperCase()===e}}))}var B=t(14),M=t.n(B),S=t(36),F=t(59),N=t.n(F),I=t(60),A=new(t.n(I).a),D=function(e){return function(){var r=Object(S.a)(M.a.mark((function r(t,n){return M.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",A.getBestMove(t.state,e,n,j(n)));case 1:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},R=function(){function e(r,t){Object(v.a)(this,e),this.player=r,this.strategy=t}return Object(b.a)(e,[{key:"getNextMove",value:function(){var e=Object(S.a)(M.a.mark((function e(r){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.strategy(r,this.player));case 1:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()}]),e}(),E={easy:function(e,r){var t=e.availableMovesForPlayer(r);return N()(t)},medium:D(2),hard:D(4)},T=o.c.div.withConfig({displayName:"Square",componentId:"sc-1gll0wv-0"})(["width:100%;height:100%;box-sizing:border-box;border-color:",";border-style:solid;border-width:0 1px 1px 0;background-color:",";position:relative;"],(function(e){return e.theme.boardBorderColor}),(function(e){return e.black?e.theme.boardBlackColor:e.theme.boardRedColor})),z=a.a.createContext({pieces:[],movesForCurrentPlayer:[],startPosition:null,selectSquare:function(){}}),q=z;var G=o.c.svg.withConfig({displayName:"Token__TokenRoot",componentId:"dpslfr-0"})(["width:100%;height:100%;.token{fill:",";}.token__border,.token__king{fill:white;fill-opacity:0.5;}"],(function(e){var r=e.theme;return"red"===e.player?r.pieceRed:r.pieceBlack}));function K(e,r){var t=[],n=function(e,r){return[e,r].join(",")},o={moveTo:function(e,r){return t.push("M",n(e,r)),o},moveBy:function(e,r){return t.push("m",n(e,r)),o},lineBy:function(e,r){return t.push("l",n(e,r)),o},circle:function(e){return t.push("a",n(e,e),0,n(1,0),n(2*e,0)),t.push("a",n(e,e),0,n(1,0),n(-2*e,0)),o},close:function(){return t.push("z"),o},build:function(){return t.join(" ")}};return o.moveTo(e,r)}var L=function(e){var r=e.player,t=e.isKing;return Object(n.jsxs)(G,{player:r,viewBox:"0 0 100 100",children:[Object(n.jsx)("circle",{className:"token",cx:"50",cy:"50",r:40}),Object(n.jsx)("path",{className:"token__border",d:K(50,50).moveBy(-35,0).circle(35).moveBy(7,0).circle(28).build(),fillRule:"evenodd"}),t&&Object(n.jsx)("path",{className:"token__king",d:K(50,60).lineBy(15,0).lineBy(5,-15).lineBy(-12,7).lineBy(-8,-15).lineBy(-8,15).lineBy(-12,-7).lineBy(5,15).lineBy(15,0).close().moveTo(47,37).circle(3).moveTo(67,45).circle(3).moveTo(27,45).circle(3).build()})]})},J=o.c.div.withConfig({displayName:"AvailableMove__Indicator",componentId:"sc-4fwfwp-0"})(["position:absolute;width:calc(80% + 6px);height:calc(80% + 6px);left:calc(10% - 3px);top:calc(10% - 3px);border:3px solid ",";border-radius:9999px;box-sizing:border-box;"],(function(e){return e.isMoveStart?"#FFFFFFCC":"#FFF"}));var U=function(e){var r=e.isMoveStart,t=void 0!==r&&r;return Object(n.jsx)(J,{isMoveStart:t})},W=o.c.div.withConfig({displayName:"BoardSquare__BoardSquareContainer",componentId:"pde5oz-0"})(["position:relative;height:12.5%;width:12.5%;"]);var H=function(e){var r=e.x,t=e.y,o=function(e,r){var t={row:e,column:r},n=Object(i.useContext)(z),o=n.pieces,a=n.movesForCurrentPlayer,c=n.startPosition,u=n.selectSquare,l=o.find((function(e){return y(e.position,t)})),s=y(c,t),f=null!=c&&a.some((function(e){var r=e.jumps,n=e.from;return y(e.to,t)&&(r&&r.length>0?r.some((function(e){return y(e,c)})):y(n,c))}));return{piece:null===l||void 0===l?void 0:l.piece,isAvailableDestination:f,isStartPosition:s,onClick:function(){return u(e,r)}}}(t,r),a=o.piece,c=o.isStartPosition,u=o.isAvailableDestination,l=o.onClick,s=(r+t)%2>0;return Object(n.jsx)(W,{onClick:l,children:Object(n.jsxs)(T,{black:s,children:[a&&Object(n.jsx)(L,Object(f.a)({},a)),u&&Object(n.jsx)(U,{}),c&&Object(n.jsx)(U,{isMoveStart:!0})]})})},Q=o.c.div.withConfig({displayName:"Board__BoardContainer",componentId:"sc-1t8xvkz-0"})(["width:500px;height:500px;box-sizing:border-box;border-color:",";border-style:solid;border-width:2px 1px 1px 2px;display:flex;flex-wrap:wrap;"],(function(e){return e.theme.boardBorderColor}));function V(){var e=new Array(64).fill(null).map((function(e,r){return function(e){var r=e%8,t=Math.floor(e/8);return Object(n.jsx)(H,{x:r,y:t},e)}(r)}));return Object(n.jsx)(Q,{children:e})}var X=a.a.memo(V);function Y(){var e=Object(d.a)(["\n  body {\n    background-color: #00731d;\n    font-family: sans-serif;\n    margin: 0;\n  }\n"]);return Y=function(){return e},e}var Z=Object(o.b)(Y()),$=o.c.h1.withConfig({displayName:"CheckersGame__Title",componentId:"sc-1di0y5g-0"})(["color:white;text-align:center;"]),ee=o.c.h2.withConfig({displayName:"CheckersGame__GameStateDisplay",componentId:"sc-1di0y5g-1"})(["color:white;text-transform:capitalize;"]),re="inProgress",te="win",ne="draw";function oe(e){return{currentPlayer:"black",pieces:e.getPieces(),startPosition:null,gameState:re}}function ie(e){var r=function(r){return{type:e,payload:r}};return r.type=e,r}var ae=ie("setStartPosition"),ce=ie("makeMove"),ue=ie("reset");function le(e,r){var t=r.type,n=r.payload;switch(t){case ae.type:return Object(f.a)(Object(f.a)({},e),{},{startPosition:n});case ce.type:var o=n.board,i=n.move,a=o.makeMove(i,e.availableMovesForCurrentPlayer),c=e.currentPlayer,u=j(e.currentPlayer),l=o.availableMovesForPlayer(u),s=Object(f.a)(Object(f.a)({},e),{},{pieces:a,currentPlayer:u,availableMovesForCurrentPlayer:l,startPosition:null});if(0===l.length)0===o.availableMovesForPlayer(c).length?s.gameState=ne:(s.gameState=te,s.winner=c);return s;case ue.type:return oe(n);default:return e}}var se=Object(o.c)("div").withConfig({displayName:"CheckersGame___StyledDiv",componentId:"sc-1di0y5g-2"})({height:"100vh",width:"100vw",display:"flex",flexDirection:"column"}),fe=Object(o.c)("div").withConfig({displayName:"CheckersGame___StyledDiv2",componentId:"sc-1di0y5g-3"})({flex:1,display:"flex",flexDirection:"row-reverse",padding:20}),de=Object(o.c)("div").withConfig({displayName:"CheckersGame___StyledDiv3",componentId:"sc-1di0y5g-4"})({flex:1,paddingLeft:20});var pe=function(){var e=Object(i.useRef)(new R("black",E.medium)),r=Object(i.useRef)(new w),t=r.current,o=Object(i.useReducer)(le,t,oe),a=Object(s.a)(o,2),c=a[0],u=c.currentPlayer,l=c.availableMovesForCurrentPlayer,f=c.pieces,d=c.startPosition,p=c.gameState,v=c.winner,b=a[1];Object(i.useEffect)((function(){u===e.current.player&&p===re&&e.current.getNextMove(r.current).then((function(e){var r=e.move;e.moves;b(ce({board:t,move:r}))}))}),[u,t,p]);var h=Object(i.useCallback)((function(r,n){if(!e.current||u!==e.current.player){var o={row:r,column:n},i=t.getPieceAtPosition(o);if(d)if(y(o,d))b(ae(null));else if((null===i||void 0===i?void 0:i.player)===u)b(ae(o));else{var a=l.find((function(e){var r=e.from,t=e.to,n=e.jumps;return y(t,o)&&(n&&n.length>0?y(n[0],d):y(r,d))}));a&&b(ce({board:t,move:a}))}else(null===i||void 0===i?void 0:i.player)===u&&b(ae(o))}}),[d,t,u,l]),m=Object(i.useMemo)((function(){return{pieces:f,movesForCurrentPlayer:l,startPosition:d,selectSquare:h}}),[f,l,d,h]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Z,{}),Object(n.jsx)(q.Provider,{value:m,children:Object(n.jsxs)(se,{children:[Object(n.jsx)($,{children:"Checkers"}),Object(n.jsxs)(fe,{children:[Object(n.jsx)(de,{children:Object(n.jsxs)(ee,{children:[p===re&&Object(n.jsxs)("span",{children:["Current player: ",u]}),p===ne&&Object(n.jsx)("span",{children:"Draw!"}),p===te&&Object(n.jsxs)("span",{children:[v," wins!"]})]})}),Object(n.jsx)(X,{})]})]})})]})};u.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(o.a,{theme:l,children:Object(n.jsx)(pe,{})})}),document.getElementById("root"))},60:function(e,r,t){var n,o=t(150).wrap,i=t(146);e.exports=function e(){return this instanceof e?o(i()):n||(n=o(i()))}}},[[149,1,2]]]);
//# sourceMappingURL=main.0106a4cb.chunk.js.map